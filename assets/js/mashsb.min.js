var strict;!function(a,b){a.fn.nearest=function(c){function d(b){f=f?f.add(b):a(b)}var e,f,g,h,i,j=b.querySelectorAll;return this.each(function(){e=this,a.each(c.split(","),function(){if(h=a.trim(this),h.indexOf("#"))for(i=e.parentNode;i;){if(g=j?i.querySelectorAll(h):a(i).find(h),g.length){d(g);break}i=i.parentNode}else d(j?b.querySelectorAll(h):a(h))})}),f||a()}}(jQuery,document),jQuery(document).ready(function(a){function b(){setTimeout(function(){"1"==mashsb.refresh&&c()},6e3)}function c(){var a=window.location.href;a+=a.indexOf("?")>-1?"&mashsb-refresh":"?mashsb-refresh";var b=new XMLHttpRequest;b.open("GET",a,!0),b.send()}function d(a){if("undefined"!=typeof mashsb&&1==mashsb.round_shares){if(a>1e6)return shares=Math.round(a/1e6*10)/10+"M",shares;if(a>1e3)return shares=Math.round(a/1e3*10)/10+"k",shares}return a.toFixed(0)}function e(){function b(){var b=a("aside.mashsb-container.mashsb-main");b.length>0&&b.each(function(){var b=a(this),c=b.find(".mashsb-box > .mashsb-buttons > .mashsb-primary-shares > a[class^='mashicon-']:visible"),d=f(c);c.css({"min-width":d+"px","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box"})})}function c(a){a=a.split("&");var b,c=a.length;if(1==c)return a[0];for(b=0;c>b;b++)if(a[b].startsWith("action="))return a[b].replace("action=","");return""}function d(a,b){return b=b||0,Math.floor(a*Math.pow(10,b))/Math.pow(10,b)}function e(a,b){return Math.round(a*Math.pow(10,b))/Math.pow(10,b)}function f(a){var b,c=a.parents("aside.mashsb-container.mashsb-main"),f=c.find(".mashsb-buttons > .mashsb-primary-shares"),g=c.find(".mashsb-box > .mashsb-count:not(.mashpv)"),h=g.length>0&&g.is(":visible"),i=c.find(".mashsb-box > .mashpv.mashsb-count"),j=i.is(":visible"),k=f.find(".onoffswitch"),l=k.is(":visible"),m=0;if(k.css("margin-right",0),h===!0){var n=parseFloat(g.css("margin-right"));isNaN(n)&&(n=0),n+=g[0].getBoundingClientRect().width,n=e(n,2),m+=n}if(j===!0){var o=parseFloat(i.css("margin-right"));isNaN(o)&&(o=0),o+=i[0].getBoundingClientRect().width,o=e(o,2),m+=o}if(l===!0){var p=5;m+=k[0].getBoundingClientRect().width+p}return b=(f[0].getBoundingClientRect().width-m)/a.length,isNaN(b)?void console.log("Couldn't calculate average width"):(0>b&&(b=Math.abs(b)),b-=a.first().outerWidth(!0)-a.first().outerWidth(),b=d(b,2))}if(1==mashsb.dynamic_buttons){var g=a(".mashsb-container.mashsb-main .mashsb-count");g.length&&new ResizeSensor(g,function(){console.log("go calc shares"),b()});var h=a(".mashsb-container.mashsb-main .mashpv .count");h.length&&new ResizeSensor(h,function(){console.log("go calc views"),b()});var i={},j={};i.open=XMLHttpRequest.prototype.open,i.send=XMLHttpRequest.prototype.send,i.callback=function(a){if(4==a.readyState&&200==a.status){var b=c(a.responseURL);"mashpv_get_views"===b&&(console.log("Get views is called"),setTimeout(function(){console.log("calling calculate")},1100)),clearInterval(j[b])}},setTimeout(function(){var a;for(a in j)j.hasOwnProperty(a)&&clearInterval(j[a])},3e5),XMLHttpRequest.prototype.open=function(a,b){a||(a=""),b||(b=""),i.open.apply(this,arguments),i.method=a,i.url=b,"get"===a.toLowerCase()&&(i.data=b.split("?"),i.data=i.data[1],i.action=c(i.data))},XMLHttpRequest.prototype.send=function(a){i.send.apply(this,arguments),"post"===i.method.toLowerCase()&&(i.data=a,i.action=c(i.data));var b=this;j[i.action]=window.setInterval(i.callback,100,b)},a("body").on("click",".onoffswitch",function(){setTimeout(function(){b()},200)}).on("click",".onoffswitch2",function(){b()}),a(window).resize(function(){b()}),1==mashsb.animate_shares?setTimeout(function(){b()},500):b()}}b(),a(".onoffswitch").on("click",function(){var b=a(this).parents(".mashsb-container");b.find(".onoffswitch").hide(),b.find(".secondary-shares").show(),b.find(".onoffswitch2").show()}),a(".onoffswitch2").on("click",function(){var b=a(this).parents(".mashsb-container");b.find(".onoffswitch").show(),b.find(".secondary-shares").hide()}),"undefined"==typeof lashare_fb&&"undefined"!=typeof mashsb&&a(".mashicon-facebook").click(function(b){winWidth=520,winHeight=550;var c=screen.height/2-winHeight/2,d=screen.width/2-winWidth/2,e=a(this).attr("href");return window.open(e,"sharer","top="+c+",left="+d+",toolbar=0,status=0,width="+winWidth+",height="+winHeight),b.preventDefault(b),!1}),"undefined"!=typeof mashsb&&a(".mashicon-twitter").click(function(b){winWidth=520,winHeight=350;var c=screen.height/2-winHeight/2,d=screen.width/2-winWidth/2,e=a(this).attr("href");return"1"===mashsb.twitter_popup&&window.open(e,"sharer","top="+c+",left="+d+",toolbar=0,status=0,width="+winWidth+",height="+winHeight),b.preventDefault(),!1}),"undefined"!=typeof mashsb&&"content"===mashsb.subscribe&&(jQuery(".mashicon-subscribe").not(".trigger_active").nearest(".mashsb-toggle-container").hide(),jQuery(".mashicon-subscribe").click(function(){var a=jQuery(this);return a.hasClass("trigger_active")?(jQuery(a).nearest(".mashsb-toggle-container").slideToggle("fast"),a.removeClass("trigger_active")):(jQuery(".trigger_active").nearest(".mashsb-toggle-container").slideToggle("slow"),jQuery(".trigger_active").removeClass("trigger_active"),jQuery(a).nearest(".mashsb-toggle-container").slideToggle("fast"),a.addClass("trigger_active")),!1})),"undefined"!=typeof mashsb&&"link"===mashsb.subscribe&&a(".mashicon-subscribe").click(function(){var b=mashsb.subscribe_url;a(this).attr("href",b)}),e(),function(a){a.fn.countTo=function(b){return b=b||{},a(this).each(function(){function c(){k+=g,j++,d(k),"function"==typeof e.onUpdate&&e.onUpdate.call(h,k),j>=f&&(i.removeData("countTo"),clearInterval(l.interval),k=e.to,"function"==typeof e.onComplete&&e.onComplete.call(h,k))}function d(a){var b=e.formatter.call(h,a,e);i.text(b)}var e=a.extend({},a.fn.countTo.defaults,{from:a(this).data("from"),to:a(this).data("to"),speed:a(this).data("speed"),refreshInterval:a(this).data("refresh-interval"),decimals:a(this).data("decimals")},b),f=Math.ceil(e.speed/e.refreshInterval),g=(e.to-e.from)/f,h=this,i=a(this),j=0,k=e.from,l=i.data("countTo")||{};i.data("countTo",l),l.interval&&clearInterval(l.interval),l.interval=setInterval(c,e.refreshInterval),d(k)})},a.fn.countTo.defaults={from:0,to:0,speed:1e3,refreshInterval:100,decimals:0,formatter:d,onUpdate:null,onComplete:null}}(jQuery),"undefined"!=typeof mashsb&&1==mashsb.animate_shares&&a(".mashsbcount").length&&a(".mashsbcount").countTo({from:0,to:mashsb.shares,speed:1e3,refreshInterval:100})}),function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.ResizeSensor=b()}(this,function(){function a(a,b){var c=Object.prototype.toString.call(a),d="[object Array]"===c||"[object NodeList]"===c||"[object HTMLCollection]"===c||"undefined"!=typeof jQuery&&a instanceof jQuery||"undefined"!=typeof Elements&&a instanceof Elements,e=0,f=a.length;if(d)for(;f>e;e++)b(a[e]);else b(a)}var b=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(a){return window.setTimeout(a,20)},c=function(d,e){function f(){var a=[];this.add=function(b){a.push(b)};var b,c;this.call=function(){for(b=0,c=a.length;c>b;b++)a[b].call()},this.remove=function(d){var e=[];for(b=0,c=a.length;c>b;b++)a[b]!==d&&e.push(a[b]);a=e},this.length=function(){return a.length}}function g(a,b){return a.currentStyle?a.currentStyle[b]:window.getComputedStyle?window.getComputedStyle(a,null).getPropertyValue(b):a.style[b]}function h(a,c){if(a.resizedAttached){if(a.resizedAttached)return void a.resizedAttached.add(c)}else a.resizedAttached=new f,a.resizedAttached.add(c);a.resizeSensor=document.createElement("div"),a.resizeSensor.className="resize-sensor";var d="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",e="position: absolute; left: 0; top: 0; transition: 0s;";a.resizeSensor.style.cssText=d,a.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+d+'"><div style="'+e+'"></div></div><div class="resize-sensor-shrink" style="'+d+'"><div style="'+e+' width: 200%; height: 200%"></div></div>',a.appendChild(a.resizeSensor),"static"==g(a,"position")&&(a.style.position="relative");var h=a.resizeSensor.childNodes[0],i=h.childNodes[0],j=a.resizeSensor.childNodes[1],k=function(){i.style.width=1e5+"px",i.style.height=1e5+"px",h.scrollLeft=1e5,h.scrollTop=1e5,j.scrollLeft=1e5,j.scrollTop=1e5};k();var l=!1,m=function(){a.resizedAttached&&(l&&(a.resizedAttached.call(),l=!1),b(m))};b(m);var n,o,p,q,r=function(){((p=a.offsetWidth)!=n||(q=a.offsetHeight)!=o)&&(l=!0,n=p,o=q),k()},s=function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener(b,c)};s(h,"scroll",r),s(j,"scroll",r)}a(d,function(a){h(a,e)}),this.detach=function(a){c.detach(d,a)}};return c.detach=function(b,c){a(b,function(a){a.resizedAttached&&"function"==typeof c&&(a.resizedAttached.remove(c),a.resizedAttached.length())||a.resizeSensor&&(a.contains(a.resizeSensor)&&a.removeChild(a.resizeSensor),delete a.resizeSensor,delete a.resizedAttached)})},c});